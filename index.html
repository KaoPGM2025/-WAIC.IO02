<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finance Management v2.0.0 - GoogleAI 2.0</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Kanit', sans-serif;
            font-size: 16px; /* ‡∏Ç‡∏ô‡∏≤‡∏î‡∏Å‡∏•‡∏≤‡∏á‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏Ç‡∏≠ */
            background-color: #f4f7f6;
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 16px;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.9em;
        }
        .timer-badge {
            font-size: 0.8em;
            color: #ef4444;
            font-weight: bold;
        }
    </style>
</head>
<body class="p-4 md:p-8">
    <div class="max-w-5xl mx-auto">
        <!-- Header -->
        <header class="mb-8 flex justify-between items-center bg-blue-600 text-white p-6 rounded-2xl shadow-lg">
            <div>
                <h1 class="text-2xl font-bold">Finance v2.0.0 (GoogleAI 2.0)</h1>
                <p class="text-sm opacity-80">‡∏£‡∏∞‡∏ö‡∏ö‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</p>
            </div>
            <div id="aiStatus" class="bg-blue-500 px-4 py-2 rounded-xl text-sm italic">
                AI: ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...
            </div>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Left Column: Input & Goals -->
            <div class="lg:col-span-1 space-y-6">
                <!-- Add Transaction -->
                <section class="glass-card p-6">
                    <h2 class="text-xl font-semibold mb-4 border-b pb-2">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</h2>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-gray-700 mb-1">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</label>
                            <select id="type" class="w-full border p-2 rounded-lg">
                                <option value="income">‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö (+)</option>
                                <option value="expense">‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢ (-)</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-gray-700 mb-1">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô (‡∏ö‡∏≤‡∏ó)</label>
                            <input type="number" id="amount" class="w-full border p-2 rounded-lg" placeholder="0.00">
                        </div>
                        <div>
                            <label class="block text-gray-700 mb-1">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</label>
                            <input type="text" id="note" class="w-full border p-2 rounded-lg" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô, ‡∏Ñ‡πà‡∏≤‡∏Ç‡πâ‡∏≤‡∏ß">
                        </div>
                        <button onclick="addTransaction()" class="w-full bg-green-500 text-white py-2 rounded-lg font-medium hover:bg-green-600 transition">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</button>
                    </div>
                </section>

                <!-- Savings Goal -->
                <section class="glass-card p-6">
                    <h2 class="text-xl font-semibold mb-4 border-b pb-2">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°</h2>
                    <div class="space-y-3">
                        <input type="number" id="goalAmount" class="w-full border p-2 rounded-lg" placeholder="‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ (‡∏ö‡∏≤‡∏ó)">
                        <button onclick="setGoal()" class="w-full bg-blue-500 text-white py-2 rounded-lg text-sm">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢</button>
                        
                        <div class="mt-4">
                            <div class="flex justify-between text-sm mb-1">
                                <span>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤</span>
                                <span id="goalPercent">0%</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-3">
                                <div id="goalBar" class="bg-blue-600 h-3 rounded-full transition-all" style="width: 0%"></div>
                            </div>
                            <p id="goalSummary" class="text-xs mt-2 text-gray-500 text-center">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢</p>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Middle/Right Column: Analysis & History -->
            <div class="lg:col-span-2 space-y-6">
                <!-- Summary Dashboard -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="glass-card p-4 text-center">
                        <p class="text-gray-500 text-sm">‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö‡∏£‡∏ß‡∏°</p>
                        <p id="totalIncome" class="text-xl font-bold text-green-600">‡∏ø0</p>
                    </div>
                    <div class="glass-card p-4 text-center">
                        <p class="text-gray-500 text-sm">‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏£‡∏ß‡∏°</p>
                        <p id="totalExpense" class="text-xl font-bold text-red-600">‡∏ø0</p>
                    </div>
                    <div class="glass-card p-4 text-center">
                        <p class="text-gray-500 text-sm">‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠</p>
                        <p id="balance" class="text-xl font-bold text-blue-600">‡∏ø0</p>
                    </div>
                </div>

                <!-- AI Analysis Card -->
                <section class="glass-card p-6 bg-gradient-to-br from-white to-blue-50">
                    <h2 class="text-xl font-semibold mb-4 flex items-center">
                        <span class="mr-2">üß†</span> AI ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô
                    </h2>
                    <div id="aiAnalysisResult" class="text-gray-700 leading-relaxed italic">
                        ‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏à‡∏≤‡∏Å AI...
                    </div>
                </section>

                <!-- Chart -->
                <section class="glass-card p-6">
                    <h2 class="text-xl font-semibold mb-4">‡∏Å‡∏£‡∏≤‡∏ü‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô</h2>
                    <div style="max-height: 250px;" class="flex justify-center">
                        <canvas id="financeChart"></canvas>
                    </div>
                </section>

                <!-- History -->
                <section class="glass-card p-6">
                    <h2 class="text-xl font-semibold mb-4">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î (‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÉ‡∏ô 1 ‡∏ô‡∏≤‡∏ó‡∏µ)</h2>
                    <div class="overflow-x-auto">
                        <table class="w-full text-left">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="p-3">‡πÄ‡∏ß‡∏•‡∏≤‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</th>
                                    <th class="p-3">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</th>
                                    <th class="p-3 text-right">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
                                    <th class="p-3 text-center">‡∏´‡∏≤‡∏¢‡πÑ‡∏õ‡πÉ‡∏ô</th>
                                </tr>
                            </thead>
                            <tbody id="transactionList">
                                <!-- Data will be injected here -->
                            </tbody>
                        </table>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <script>
        // Data State
        let data = {
            transactions: [], // ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏£‡∏∞‡∏¢‡∏∞‡∏¢‡∏≤‡∏ß (‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡∏≠‡∏¢‡∏π‡πà)
            displayHistory: [], // ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ó‡∏µ‡πà‡∏´‡∏≤‡∏¢‡πÑ‡∏õ‡πÉ‡∏ô 1 ‡∏ô‡∏≤‡∏ó‡∏µ
            goal: 0,
            totalIncome: 0,
            totalExpense: 0
        };

        let chart = null;

        // Initialize from LocalStorage (‡∏´‡πâ‡∏≤‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏≤‡∏¢)
        window.onload = () => {
            const savedData = localStorage.getItem('finance_v2_data');
            if (savedData) {
                const parsed = JSON.parse(savedData);
                data.transactions = parsed.transactions || [];
                data.goal = parsed.goal || 0;
                document.getElementById('goalAmount').value = data.goal || '';
            }
            updateUI();
            initChart();
            startGlobalTimer();
        };

        function saveData() {
            localStorage.setItem('finance_v2_data', JSON.stringify({
                transactions: data.transactions,
                goal: data.goal
            }));
        }

        function initChart() {
            const ctx = document.getElementById('financeChart').getContext('2d');
            chart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö', '‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢'],
                    datasets: [{
                        data: [data.totalIncome, data.totalExpense],
                        backgroundColor: ['#22c55e', '#ef4444'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });
        }

        function addTransaction() {
            const type = document.getElementById('type').value;
            const amount = parseFloat(document.getElementById('amount').value);
            const note = document.getElementById('note').value || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏';

            if (isNaN(amount) || amount <= 0) return alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');

            const newTx = {
                id: Date.now(),
                type,
                amount,
                note,
                time: new Date().toLocaleTimeString(),
                expiresAt: Date.now() + 60000 // 1 Minute countdown
            };

            // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ñ‡∏≤‡∏ß‡∏£
            data.transactions.push(newTx);
            // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß
            data.displayHistory.push(newTx);

            saveData();
            updateUI();
            
            // Clear inputs
            document.getElementById('amount').value = '';
            document.getElementById('note').value = '';
        }

        function setGoal() {
            const goalVal = parseFloat(document.getElementById('goalAmount').value);
            if (isNaN(goalVal)) return;
            data.goal = goalVal;
            saveData();
            updateUI();
        }

        function updateUI() {
            // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏≤‡∏ß‡∏£
            data.totalIncome = data.transactions.filter(t => t.type === 'income').reduce((s, t) => s + t.amount, 0);
            data.totalExpense = data.transactions.filter(t => t.type === 'expense').reduce((s, t) => s + t.amount, 0);
            const balance = data.totalIncome - data.totalExpense;

            document.getElementById('totalIncome').innerText = `‡∏ø${data.totalIncome.toLocaleString()}`;
            document.getElementById('totalExpense').innerText = `‡∏ø${data.totalExpense.toLocaleString()}`;
            document.getElementById('balance').innerText = `‡∏ø${balance.toLocaleString()}`;

            // ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢
            if (data.goal > 0) {
                const percent = Math.min((balance / data.goal) * 100, 100).toFixed(1);
                document.getElementById('goalPercent').innerText = `${percent}%`;
                document.getElementById('goalBar').style.width = `${percent}%`;
                document.getElementById('goalSummary').innerText = `‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: ‡∏ø${data.goal.toLocaleString()} (‡∏Ç‡∏≤‡∏î‡∏≠‡∏µ‡∏Å ‡∏ø${Math.max(data.goal - balance, 0).toLocaleString()})`;
            }

            // ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏° (‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤)
            renderHistory();

            // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Å‡∏£‡∏≤‡∏ü
            if (chart) {
                chart.data.datasets[0].data = [data.totalIncome, data.totalExpense];
                chart.update();
            }

            // AI ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå
            analyzeWithAI(balance);
        }

        function renderHistory() {
            const list = document.getElementById('transactionList');
            list.innerHTML = '';
            
            const now = Date.now();
            // ‡∏Å‡∏£‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤
            data.displayHistory = data.displayHistory.filter(t => t.expiresAt > now);

            data.displayHistory.slice().reverse().forEach(t => {
                const remaining = Math.ceil((t.expiresAt - now) / 1000);
                const tr = document.createElement('tr');
                tr.className = "border-b hover:bg-gray-50 transition";
                tr.innerHTML = `
                    <td class="p-3 text-sm text-gray-500">${t.time}</td>
                    <td class="p-3">${t.note}</td>
                    <td class="p-3 text-right font-bold ${t.type === 'income' ? 'text-green-600' : 'text-red-600'}">
                        ${t.type === 'income' ? '+' : '-'}‡∏ø${t.amount.toLocaleString()}
                    </td>
                    <td class="p-3 text-center">
                        <span class="timer-badge">${remaining}s</span>
                    </td>
                `;
                list.appendChild(tr);
            });
        }

        function analyzeWithAI(balance) {
            const aiBox = document.getElementById('aiAnalysisResult');
            const aiHeader = document.getElementById('aiStatus');

            if (data.transactions.length === 0) {
                aiBox.innerText = "‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å AI ‡∏à‡∏∂‡∏á‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ";
                aiHeader.innerText = "AI: ‡∏£‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...";
                return;
            }

            const expenseRatio = data.totalIncome > 0 ? (data.totalExpense / data.totalIncome) * 100 : 0;
            
            let analysis = "";
            if (balance < 0) {
                analysis = "‚ö†Ô∏è AI ‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ '‡∏ï‡∏¥‡∏î‡∏•‡∏ö': ‡∏Ñ‡∏∏‡∏ì‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏Å‡∏¥‡∏ô‡∏ï‡∏±‡∏ß! ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏•‡∏î‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏ü‡∏∏‡πà‡∏°‡πÄ‡∏ü‡∏∑‡∏≠‡∏¢‡∏ó‡∏±‡∏ô‡∏ó‡∏µ ‡πÅ‡∏•‡∏∞‡∏´‡∏¢‡∏∏‡∏î‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏ô‡∏µ‡πâ‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏Å‡∏©‡∏≤‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£‡∏†‡∏≤‡∏û";
                aiHeader.innerText = "AI: ‡∏£‡∏∞‡∏ß‡∏±‡∏á! ‡∏ß‡∏¥‡∏Å‡∏§‡∏ï";
            } else if (expenseRatio > 70) {
                analysis = "üìä AI ‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ '‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á': ‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏™‡∏π‡∏á‡∏ñ‡∏∂‡∏á " + expenseRatio.toFixed(1) + "% ‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö ‡πÅ‡∏°‡πâ‡∏à‡∏∞‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ï‡∏¥‡∏î‡∏•‡∏ö‡πÅ‡∏ï‡πà‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏≠‡∏°‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ô‡πâ‡∏≠‡∏¢‡∏°‡∏≤‡∏Å ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏™‡∏≥‡∏£‡∏≠‡∏á";
                aiHeader.innerText = "AI: ‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á";
            } else if (balance > 0) {
                analysis = "‚úÖ AI ‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ '‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°': ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û ‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏™‡∏∞‡∏™‡∏° ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏ô‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏°‡∏ï‡∏≤‡∏°‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏ß‡πâ‡∏ó‡∏µ‡πà " + data.goal.toLocaleString() + " ‡∏ö‡∏≤‡∏ó";
                aiHeader.innerText = "AI: ‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏î‡∏µ";
            }

            aiBox.innerHTML = `<strong>‡∏ö‡∏ó‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå:</strong> ${analysis}<br><small class="text-gray-400 mt-2 block">*‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ï‡∏≤‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á ‡∏ì ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ${new Date().toLocaleDateString('th-TH')}</small>`;
        }

        function startGlobalTimer() {
            // ‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á‡∏ó‡∏∏‡∏Å 1 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≤‡∏Å UI
            setInterval(() => {
                renderHistory();
            }, 1000);
        }
    </script>
</body>
</html>
